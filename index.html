<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="src/css/main.css">
    <!--
    <link rel="stylesheet" href="src/css/themes/dark-theme.css">
    -->

    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/requirejs/require.js"></script>
    <script src="src/js/dh-select.js"></script>
</head>
<body>
<div class="col-md-8 col-md-offset-2">
    <div class="panel panel-default">
        <div class="panel-body">
            <form id="test-form" class="form-horizontal" role="form">
                <div class="form-group">
                    <label class="col-sm-4 control-label">
                        Счет
                    </label>
                    <div id="count" class="col-sm-2"></div>
                </div>
                <div class="form-group">
                    <label class="col-sm-4 control-label">
                        Категория
                    </label>
                    <div id="category" class="col-sm-4"></div>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="col-md-8 col-md-offset-2">
    <div class="jumbotron">
        <div class="col-md-12">
            <p id="form-string"></p>
        </div>
    </div>
</div>
<script>
    require(['dh-select'], function (DhSelect) {
        var categorySelect,
            countSelect;

        categorySelect = new DhSelect(
            $('#category'),
            getCategoriesData(),
            {
                name: 'category'
            }
        );
        categorySelect.setValue(182);

        countSelect = new DhSelect(
            $('#count'),
            getCountData(),
            {
                name: 'count'
            }
        );
        countSelect.setValue(2);

        getFormString();

        categorySelect.$el.on('change', getFormString);
        countSelect.$el.on('change', getFormString);

        function getFormString() {
            $('#form-string').text($('#test-form').serialize());
        }

        function getCategoriesData() {
            return [
                {
                    value: 1,
                    title: 'Расходы',
                    childs: [
                        {
                            value: 11,
                            title: 'Отпускные'
                        },
                        {
                            value: 12,
                            title: 'Питание',
                            childs: [
                                {
                                    value: 121,
                                    title: 'Питание дома'
                                },
                                {
                                    value: 122,
                                    title: 'Питание вне дома'
                                }
                            ]
                        },
                        {
                            value: 13,
                            title: 'Подарки, материальная помощь'
                        },
                        {
                            value: 14,
                            title: 'Приобретение квартиры'
                        },
                        {
                            value: 15,
                            title: 'Проезд, транспорт',
                            childs: [
                                {
                                    value: 151,
                                    title: 'Общественный транспорт'
                                }
                            ]
                        },
                        {
                            value: 16,
                            title: 'Прочие личные расходы'
                        },
                        {
                            value: 17,
                            title: 'Расходы по работе'
                        },
                        {
                            value: 18,
                            title: 'Связь, ТВ и интернет',
                            childs: [
                                {
                                    value: 181,
                                    title: 'Городской телефон'
                                },
                                {
                                    value: 182,
                                    title: 'Интернет и ТВ'
                                },
                                {
                                    value: 183,
                                    title: 'Сотовый телефон'
                                }
                            ]
                        },
                        {
                            value: 19,
                            title: 'Спорт',
                            childs: [
                                {
                                    value: 191,
                                    title: 'Спортивное питание'
                                },
                                {
                                    value: 192,
                                    title: 'Спортивный инвентарь'
                                }
                            ]
                        },
                        {
                            value: 110,
                            title: 'Уход за собой'
                        }
                    ]
                },
                {
                    value: 2,
                    title: 'Доходы',
                    childs: [
                        {
                            value: 21,
                            title: 'Персональные доходы',
                            childs: [
                                {
                                    value: 211,
                                    title: 'Бонусы и премии'
                                },
                                {
                                    value: 212,
                                    title: 'Заработная плата'
                                },
                                {
                                    value: 213,
                                    title: 'Сверхурочное время'
                                }
                            ]
                        },
                        {
                            value: 22,
                            title: 'Прочие доходы'
                        }
                    ]
                }
            ];
        }

        function getCountData() {
            return [
                {
                    value: 1,
                    title: 'Кошелек'
                },
                {
                    value: 2,
                    title: 'Карта Сбербанк'
                },
                {
                    value: 3,
                    title: 'Карта Альфа-банк'
                }
            ];
        }
    });
</script>
</body>
</html>